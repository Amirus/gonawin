<div>
  <div class="page-header">
    <h1>Tournament</h1>
    <form accept-charset="UTF-8" class="form-horizontal" method="post">
      <div ng-if="joined">
	<input class="btn btn-primary btn-join" ng-click="leaveTournament()" name="commit" type="submit" value="Leave"/>
      </div>
      <div ng-if="!joined">
	<input class="btn btn-primary btn-join" ng-click="joinTournament()" name="commit" type="submit" value="Join" />
      </div>
      <a href="/ng#/tournaments/show/{{tournamentData.Tournament.Id}}#tournamentModal" class="btn btn-primary" data-toggle="modal"><span>Add Team</span></a>
    </form>
    <!-- Modal -->
    <div id="tournamentModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
        <h3 id="myModalLabel">Add Team</h3>
      </div>
      <div class="modal-body">
	<!-- candidates -->
	<div ng-if="candidates.length > 0">
	  <table class="table table-hover">
	    <tbody>
	      <tr ng-repeat="t in candidates">
		<form accept-charset="UTF-8" class="form-horizontal" method="post">
		  <td><a href="/ng#/teams/{{t.Id}}">{{t.Name}}</a></td>
		  <td>
		    <button class="btn btn-primary btn-join pull-right" ng-click="joinOrLeaveTournamentAsTeam(t)" name="TeamIdButton" type="submit" value="{{t.Id}}" >
		      <div ng-if="t.Joined">Leave</div>
		      <div ng-if="!t.Joined">Join</div>
		    </button>
		  </td>
		</form>
	      </tr>
	    </tbody>
	  </table>
	</div>
	<div ng-if="!candidates || candidates.length == 0">
	  <div id="no_team">
	    <p>No team has been created by you.</p>
	    <a href="/ng#/teams/new" class="btn btn-primary"><span>Create new team</span></a>
	  </div>
	</div>
	<!-- end of candidates -->
      </div>
    </div>
  </div>
  
  <dl class="dl-horizontal">
    <dt><strong>Id:</strong></dt>
    <dd>{{tournamentData.Tournament.Id}}</dd>
    <dt><strong>Name:</strong></dt>
    <dd>{{tournamentData.Tournament.Name}}</dd>
  </dl>
  
  <div ng-if="isTournamentAdmin">
    <div class="form-actions">
      <form class="form-horizontal">
	<a href="/ng#/tournaments/edit/{{tournamentData.Tournament.Id}}" class="btn"><span>Edit</span></a>
	<input id="action" name="Action" type="hidden" value="delete" />
	<button class="btn btn-danger" name="delete" onclick="return confirm('Are you sure?');" ng-click="deleteTournament()">Delete</button>
      </form>
    </div>
  </div>
  <!-- participants -->
  <div class="participants">
    <table class="table table-striped">
      <thead>
        <tr>
  	  <th>Participants</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="p in tournamentData.Participants">
  	       <td><a href="/ng#/users/{{p.Id}}">{{p.Username}}</a></td>
        </tr>
      </tbody>
    </table>
  </div>
  <!-- / participants -->
  <!-- Teams -->
  <div class="teams">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Teams</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="t in tournamentData.Teams">
          <td><a href="/ng#/teams/{{t.Id}}">{{t.Name}}</a></td>
        </tr>
      </tbody>
    </table>
  </div>
  <!-- / Teams -->
</div>
